---
name: task-intent
description: 自动识别用户的任务请求意图，并调用 commander 启动任务管理流程。这是用户输入任务请求时的自动入口，无需手动运行 /commander。
---

# 任务意图识别

自动识别用户的任务请求，调用 commander 启动任务分解和执行流程。

## 触发模式

当用户输入包含以下模式时，应识别为任务请求：

| 中文模式 | 英文模式 | 示例 |
|---------|---------|------|
| "帮我写..." | "Help me write..." | "帮我写一个AI4S本子" |
| "我要做一个..." | "I want to build..." | "我要做一个博客" |
| "创建一个..." | "Create a..." | "创建一个Next.js项目" |
| "开发..." | "Develop..." | "开发一个API服务" |
| "实现..." | "Implement..." | "实现用户认证功能" |
| "搭建..." | "Build..." | "搭建一个监控系统" |
| "设计..." | "Design..." | "设计一个数据库" |

## 处理流程

### 步骤 1：意图识别

判断用户输入是否为任务请求：
- 是否包含动作动词（写、做、创建、开发、实现、搭建、设计...）
- 是否有明确的任务对象（本子、博客、项目、服务、功能...）
- 不是简单的信息查询或问题

### 步骤 2：任务类型判断

根据用户输入判断任务类型：

| 类型 | 关键词 | 处理方式 |
|-----|-------|---------|
| **开发任务** | 项目、网站、应用、API、服务 | commander: 开发型任务 |
| **文档任务** | 本子、文档、报告、申报书 | commander: 文档型任务 |
| **研究任务** | 研究、分析、调研 | commander: 研究型任务 |
| **设计任务** | 设计、架构、方案 | commander: 设计型任务 |

### 步骤 3：提取任务参数

从用户输入中提取：
- **任务名称**：简短描述（如 "AI4S基金申请"）
- **任务类型**：dev/doc/research/design
- **任务详情**：完整描述

### 步骤 4：调用 commander

使用提取的参数调用 commander：

```
Skill("commander", args="start --type={类型} {任务描述}")
```

## 示例对话

### 示例 1：直接启动

**用户**: 帮我写一个关于 AI4S 的本子

**AI**:
```
检测到任务请求：撰写 AI4S 基金申请文档

正在启动 commander...
[执行 commander skill...]

任务已创建：k01 - AI4S 基金申请书撰写
```

### 示例 2：确认后启动

**用户**: 我要做一个 Next.js 博客

**AI**:
```
检测到任务请求：搭建 Next.js 博客

任务信息：
- 类型：开发任务
- 描述：使用 Next.js 搭建博客系统

是否启动 commander 开始任务规划？
- [启动] 开始任务分解
- [取消] 稍后手动启动
```

### 示例 3：非任务请求

**用户**: Next.js 怎么配置 MDX？

**AI**:
```
这不是一个完整的任务请求，而是一个技术问题。

我可以直接回答您的问题，或者如果您想搭建一个完整的 MDX 博客项目，
可以告诉我"帮我搭建一个 Next.js MDX 博客"，我会启动 commander
来规划整个任务。
```

## 错误处理

| 场景 | 处理方式 |
|------|---------|
| 意图不明确 | 询问用户具体需求，提供选项 |
| 任务描述模糊 | 引导用户补充细节 |
| commander 不可用 | 提示用户手动运行 /commander |

## 与 commander 的关系

```
task-intent (意图识别层)
    ↓ 提取任务参数
commander (任务管理层)
    ↓ 分解任务
skill-generator (技能生成层)
    ↓ 生成子技能
k01_xxx, k02_xxx (执行层)
```

## 注意事项

1. **不是所有请求都是任务**：区分"问题"和"任务"
   - 问题："如何配置..." → 直接回答
   - 任务："帮我搭建..." → 调用 commander

2. **保持简洁**：不要过度询问，能直接启动就直接启动

3. **兼容手动调用**：不干扰用户直接使用 `/commander start`

## 对比：何时使用各 skill

| 用户输入 | 触发 skill |
|---------|-----------|
| "我是谁" | user-profile |
| "帮我写..." | task-intent → commander |
| "/commander start" | commander（手动） |
| "/user-profile" | user-profile（手动） |
